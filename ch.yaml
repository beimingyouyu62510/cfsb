allow-lan: true
unified-delay: false
tcp-concurrent: true
find-process-mode: strict
global-client-fingerprint: chrome
profile:
  store-selected: true
  store-fake-ip: true
sniffer:
  enable: true
  sniff:
    HTTP:
      ports:
        - 80
        - 8080-8880
      override-destination: true
    TLS:
      ports:
        - 443
        - 8443
    QUIC:
      ports:
        - 443
        - 8443
  skip-domain:
    - Mijia Cloud
    - dlg.io.mi.com
    - +.push.apple.com
tun:
  enable: true
  stack: system
  device: mihomo
  dns-hijack:
    - any:53
    - tcp://any:53
  auto-route: true
  auto-detect-interface: true
  strict-route: true
  endpoint-independent-nat: true
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  prefer-h3: true
  respect-rules: true
  enhanced-mode: fake-ip
  use-hosts: true
  default-nameserver:
    - 223.5.5.5
    - 180.168.255.18
    - 117.50.11.11
  nameserver:
    - https://dns.google/dns-query
    - https://1.1.1.1/dns-query
  proxy-server-nameserver:
    - 223.5.5.5
    - https://dns.alidns.com/dns-query
    - 119.29.29.29
    - https://doh.pub/dns-query
  nameserver-policy:
    "geosite:cn,apple-cn,category-games@cn,private":
      - 117.50.11.11
      - 180.168.255.18
      - 223.5.5.5
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter:
    - '*'
    - +.lan
    - +.local
    - +.stun.*.*
    - +.stun.*.*.*
    - +.stun.*.*.*.*
    - +.stun.*.*.*.*.*
geodata-mode: true
geox-url:
  geoip: https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geoip.dat
  geosite: https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geosite.dat
proxies:
  # æ³¨æ„ï¼šè¿™éƒ¨åˆ†å†…å®¹åœ¨é¦–æ¬¡æ‰‹åŠ¨åˆ›å»ºæˆ–å…‹éš†ä»“åº“æ—¶å¯èƒ½ä¸ºç©ºæˆ–åŒ…å«æ—§èŠ‚ç‚¹ã€‚
  # æ¯æ¬¡ GitHub Actions è¿è¡Œ update_nodes.py è„šæœ¬åï¼Œ
  # è¿™é‡Œçš„åˆ—è¡¨éƒ½ä¼šè¢«è¿œç¨‹è®¢é˜…æºä¸­æœ€æ–°çš„ VLESS+WS èŠ‚ç‚¹å®Œå…¨æ›¿æ¢ã€‚
  - name: Hong Kong 0
    server: 104.17.194.213
    port: 80
    type: vless
    uuid: cdc1d7d3-fe56-4a38-a724-21308e4393d9
    tls: false
    network: ws
    ws-opts:
      path: /?ed=2048
      headers:
        Host: empty-rain-1b4a.hebe061103.workers.dev
  - name: Hong Kong 1
    server: 104.17.194.220
    port: 80
    type: vless
    uuid: 3d2176d3-89b8-40aa-b004-0ff837bed25c
    tls: false
    network: ws
    ws-opts:
      path: /?ed=2048
      headers:
        Host: gentle-grass-cf96.hebe061103.workers.dev
  - name: Hong Kong 2
    server: 104.17.194.239
    port: 80
    type: vless
    uuid: 3962565d-e47d-4dd0-aa19-3286e04d9cb6
    tls: false
    network: ws
    ws-opts:
      path: /?ed=2048
      headers:
        Host: nameless-resonance-6e4c.hebe061103.workers.dev
  - name: Hong Kong 3
    server: 104.17.194.249
    port: 80
    type: vless
    uuid: 4239d44c-19c7-4b8b-ae07-16607c95b6fb
    tls: false
    network: ws
    ws-opts:
      path: /?ed=2048
      headers:
        Host: gentle-night-12e3.hebe061103.workers.dev
  - name: Hong Kong 4
    server: 104.17.194.1
    port: 80
    type: vless
    uuid: 2e632913-bae0-4855-893c-02c828c835a2
    tls: false
    network: ws
    ws-opts:
      path: /?ed=2048
      headers:
        Host: 56e5.hebe061103.workers.dev
proxy-groups:
  # æ ¸å¿ƒè´Ÿè½½å‡è¡¡ç»„ï¼šæ‰€æœ‰ä»è¿œç¨‹è®¢é˜…è·å–çš„ VLESS+WS èŠ‚ç‚¹éƒ½æ±‡é›†äºæ­¤ã€‚
  # è¿™ä¸ªç»„ç”± update_nodes.py è„šæœ¬å…¨è‡ªåŠ¨æ›´æ–°ã€‚
  # æ‰€æœ‰éœ€è¦ä»£ç†çš„æµé‡éƒ½å°†å¯¼å‘æ­¤ç»„ï¼Œç”±å…¶æ ¹æ® consistent-hashing ç­–ç•¥è¿›è¡Œåˆ†å‘ã€‚
  - name: ğŸš€ è´Ÿè½½å‡è¡¡
    type: load-balance
    url: http://www.google.com/generate_204
    interval: 300
    strategy: consistent-hashing
    proxies:
      # è„šæœ¬ä¼šè‡ªåŠ¨æ›´æ–°è¿™é‡Œçš„åˆ—è¡¨ï¼Œæ›¿æ¢ä¸ºæœ€æ–°çš„ Hong Kong X èŠ‚ç‚¹
      - Hong Kong 0
      - Hong Kong 1
      - Hong Kong 2
      - Hong Kong 3
      - Hong Kong 4

  # å…¨çƒç›´è¿ç»„ï¼šç”¨äºå¼ºåˆ¶ç›´è¿çš„è§„åˆ™ã€‚
  - name: ğŸ¯ å…¨çƒç›´è¿
    type: select
    proxies:
      - DIRECT

  # åº”ç”¨å‡€åŒ–/å¹¿å‘Šæ‹¦æˆªç»„ï¼šç”¨äºå¼ºåˆ¶æ‹’ç»æˆ–æ‹¦æˆªçš„è§„åˆ™ã€‚
  - name: ğŸƒ åº”ç”¨å‡€åŒ–
    type: select
    proxies:
      - REJECT

rule-providers:
  Anti-Ads:
    type: http
    behavior: domain
    format: yaml
    path: ./rule_provider/Anti-Ads.yaml
    url: https://anti-ad.net/clash.yaml
    interval: 43200 # 12å°æ—¶æ›´æ–°ä¸€æ¬¡
    lazy: false
rules:
  ## é IP ç±»è§„åˆ™ - æ›´ç²¾ç¡®çš„åŒ¹é…ä¼˜å…ˆ
  ### å¹¿å‘Šå’Œæ¶æ„åŸŸåæ‹¦æˆª (ä½¿ç”¨ Rule Provider) - æ”¾åœ¨éå¸¸é å‰çš„ä½ç½®ä»¥æé«˜æ‹¦æˆªæ•ˆç‡
  - RULE-SET,Anti-Ads,ğŸƒ åº”ç”¨å‡€åŒ– # å¯¼å‘æ–°çš„â€œåº”ç”¨å‡€åŒ–â€ç»„

  ### è‡ªå®šä¹‰ç›´è¿ï¼ˆå¸¸ç”¨å›½å†…æœåŠ¡ï¼Œç¡®ä¿ä¼˜å…ˆç›´è¿ï¼‰
  - DOMAIN-SUFFIX,taobao.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,tmall.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,alibaba.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,alipay.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-SUFFIX,aliyun.com,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-KEYWORD,taobao,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-KEYWORD,tmall,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN,v.ddys.pro,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN,ddys.pro,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-KEYWORD,easytier,ğŸ¯ å…¨çƒç›´è¿

  ### ç‰¹å®šä»£ç†éœ€æ±‚ï¼ˆç‰¹å®šåŸŸåå¼ºåˆ¶èµ°ä»£ç†ï¼‰
  - DOMAIN-SUFFIX,hf.co,ğŸš€ è´Ÿè½½å‡è¡¡
  - DOMAIN-SUFFIX,r2.cloudflarestorage.com,ğŸš€ è´Ÿè½½å‡è¡¡

  ### QUIC/UDP æµé‡å¤„ç† (è°¨æ…è°ƒæ•´ï¼Œå¦‚æœé‡åˆ° QUIC æœåŠ¡å¼‚å¸¸ï¼Œå¯èƒ½éœ€è¦ç§»é™¤æ­¤æ¡)
  # å¦‚æœè¦ä¿ç•™ï¼Œå°†å…¶æŒ‡å‘ ğŸš€ è´Ÿè½½å‡è¡¡ï¼Œè€Œä¸æ˜¯ REJECT
  # - AND,(AND,(DST-PORT,443),(NETWORK,UDP)),(NOT,((GEOSITE,cn))),ğŸš€ è´Ÿè½½å‡è¡¡ 

  ### GEOSITE è§„åˆ™ - å›½å†…æœåŠ¡ä¼˜å…ˆç›´è¿ï¼Œå›½å¤–æœåŠ¡èµ°ä»£ç†
  - GEOSITE,category-games@cn,ğŸ¯ å…¨çƒç›´è¿ # å›½å†…æ¸¸æˆç›´è¿ï¼Œç¡®ä¿ä½å»¶è¿Ÿ
  - GEOSITE,cn,ğŸ¯ å…¨çƒç›´è¿ # æ‰€æœ‰ä¸­å›½å¤§é™†åŸŸåç›´è¿
  - GEOSITE,apple-cn,ğŸ¯ å…¨çƒç›´è¿ # è‹¹æœä¸­å›½æœåŠ¡ç›´è¿
  - GEOSITE,microsoft,ğŸ¯ å…¨çƒç›´è¿ # å¾®è½¯æœåŠ¡ï¼Œé»˜è®¤ç›´è¿ï¼Œæ ¹æ®éœ€è¦å¯è°ƒæ•´ä¸ºè´Ÿè½½å‡è¡¡
  - GEOSITE,apple,ğŸš€ è´Ÿè½½å‡è¡¡ # è‹¹æœå›½é™…æœåŠ¡èµ°è´Ÿè½½å‡è¡¡
  - GEOSITE,google,ğŸš€ è´Ÿè½½å‡è¡¡ # Google æœåŠ¡èµ°è´Ÿè½½å‡è¡¡
  - GEOSITE,telegram,ğŸš€ è´Ÿè½½å‡è¡¡ # Telegram èµ°è´Ÿè½½å‡è¡¡
  - GEOSITE,category-entertainment,ğŸš€ è´Ÿè½½å‡è¡¡ # æµåª’ä½“å’Œå¨±ä¹èµ°è´Ÿè½½å‡è¡¡
  - GEOSITE,category-social-media-!cn,ğŸš€ è´Ÿè½½å‡è¡¡ # å›½å¤–ç¤¾äº¤åª’ä½“èµ°è´Ÿè½½å‡è¡¡
  - GEOSITE,category-android-app-download,ğŸš€ è´Ÿè½½å‡è¡¡ # å®‰å“åº”ç”¨ä¸‹è½½èµ°è´Ÿè½½å‡è¡¡
  - GEOSITE,category-porn,ğŸš€ è´Ÿè½½å‡è¡¡ # æ•æ„Ÿå†…å®¹èµ°è´Ÿè½½å‡è¡¡
  - GEOSITE,onedrive,ğŸš€ è´Ÿè½½å‡è¡¡ # OneDrive èµ°è´Ÿè½½å‡è¡¡
  - GEOSITE,category-ai-chat-!cn,ğŸš€ è´Ÿè½½å‡è¡¡ # AIèŠå¤©èµ°è´Ÿè½½å‡è¡¡
  - GEOSITE,category-cryptocurrency,ğŸš€ è´Ÿè½½å‡è¡¡ # åŠ å¯†è´§å¸èµ°è´Ÿè½½å‡è¡¡
  - GEOSITE,geolocation-!cn,ğŸš€ è´Ÿè½½å‡è¡¡ # æ‰€æœ‰éä¸­å›½åœ°ç†ä½ç½®çš„åŸŸåï¼ˆå…œåº•ä»£ç†ï¼‰

  ## IP ç±»è§„åˆ™ - ç²¾ç¡®åŒ¹é…ä¼˜å…ˆ
  ### ç»•è¿‡å±€åŸŸç½‘å’Œç‰¹æ®Šä¿ç•™åœ°å€ (ä¼˜å…ˆç›´è¿)
  - IP-CIDR,10.0.0.0/8,ğŸ¯ å…¨çƒç›´è¿
  - IP-CIDR,172.16.0.0/12,ğŸ¯ å…¨çƒç›´è¿
  - IP-CIDR,192.168.0.0/16,ğŸ¯ å…¨çƒç›´è¿
  - IP-CIDR,100.64.0.0/10,ğŸ¯ å…¨çƒç›´è¿
  - IP-CIDR,127.0.0.0/8,ğŸ¯ å…¨çƒç›´è¿
  - IP-CIDR,::1/128,ğŸ¯ å…¨çƒç›´è¿       # IPv6 localhost
  - IP-CIDR,fc00::/7,ğŸ¯ å…¨çƒç›´è¿      # IPv6 Unique Local Address
  - IP-CIDR,fe80::/10,ğŸ¯ å…¨çƒç›´è¿     # IPv6 Link-Local Address

  ### GEOIP è§„åˆ™ - å›½å†… IP ç›´è¿ï¼Œå›½å¤– IP èµ°ä»£ç†
  - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿,no-resolve # ä¸­å›½å¤§é™† IP ç›´è¿
  - GEOIP,google,ğŸš€ è´Ÿè½½å‡è¡¡,no-resolve # Google IP èµ°è´Ÿè½½å‡è¡¡
  - GEOIP,telegram,ğŸš€ è´Ÿè½½å‡è¡¡,no-resolve # Telegram IP èµ°è´Ÿè½½å‡è¡¡
  - GEOIP,facebook,ğŸš€ è´Ÿè½½å‡è¡¡,no-resolve # Facebook IP èµ°è´Ÿè½½å‡è¡¡
  - GEOIP,twitter,ğŸš€ è´Ÿè½½å‡è¡¡,no-resolve # Twitter IP èµ°è´Ÿè½½å‡è¡¡
  - GEOIP,netflix,ğŸš€ è´Ÿè½½å‡è¡¡,no-resolve # Netflix IP èµ°è´Ÿè½½å‡è¡¡

  ## å…œåº•è§„åˆ™ - æœ€ååŒ¹é…
  - MATCH,ğŸš€ è´Ÿè½½å‡è¡¡ # ä»»ä½•æœªåŒ¹é…çš„æµé‡éƒ½äº¤ç»™ "ğŸš€ è´Ÿè½½å‡è¡¡" å¤„ç†
