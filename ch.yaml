allow-lan: true
unified-delay: false
tcp-concurrent: true
find-process-mode: strict
global-client-fingerprint: chrome
profile:
  store-selected: true
  store-fake-ip: true
sniffer:
  enable: true
  sniff:
    HTTP:
      ports:
        - 80
        - 8080-8880
      override-destination: true
    TLS:
      ports:
        - 443
        - 8443
    QUIC:
      ports:
        - 443
        - 8443
  skip-domain:
    - Mijia Cloud
    - dlg.io.mi.com
    - +.push.apple.com
tun:
  enable: true
  stack: system
  device: mihomo
  dns-hijack:
    - any:53
    - tcp://any:53
  auto-route: true
  auto-detect-interface: true
  strict-route: true
  endpoint-independent-nat: true
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  prefer-h3: true
  respect-rules: true
  enhanced-mode: fake-ip
  use-hosts: true
  default-nameserver:
    - 223.5.5.5
    - 180.168.255.18
    - 117.50.11.11
  nameserver:
    - https://dns.google/dns-query
    - https://1.1.1.1/dns-query
  proxy-server-nameserver:
    - 223.5.5.5
    - https://dns.alidns.com/dns-query
    - 119.29.29.29
    - https://doh.pub/dns-query
  nameserver-policy:
    "geosite:cn,apple-cn,category-games@cn,private":
      - 117.50.11.11
      - 180.168.255.18
      - 223.5.5.5
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter:
    - '*'
    - +.lan
    - +.local
    - +.stun.*.*
    - +.stun.*.*.*
    - +.stun.*.*.*.*
    - +.stun.*.*.*.*.*
geodata-mode: true
geox-url:
  geoip: https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geoip.dat
  geosite: https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geosite.dat
proxies:
  # æ³¨æ„ï¼šè¿™éƒ¨åˆ†å†…å®¹åœ¨é¦–æ¬¡æ‰‹åŠ¨åˆ›å»ºæˆ–å…‹éš†ä»“åº“æ—¶å¯èƒ½ä¸ºç©ºæˆ–åŒ…å«æ—§èŠ‚ç‚¹ã€‚
  # æ¯æ¬¡ GitHub Actions è¿è¡Œ update_nodes.py è„šæœ¬åï¼Œ
  # è¿™é‡Œçš„åˆ—è¡¨éƒ½ä¼šè¢«è¿œç¨‹è®¢é˜…æºä¸­æœ€æ–°çš„ VLESS+WS èŠ‚ç‚¹å®Œå…¨æ›¿æ¢ã€‚
  - name: Hong Kong 0
    server: 104.17.194.213
    port: 80
    type: vless
    uuid: cdc1d7d3-fe56-4a38-a724-21308e4393d9
    tls: false
    network: ws
    ws-opts:
      path: /?ed=2048
      headers:
        Host: empty-rain-1b4a.hebe061103.workers.dev
  - name: Hong Kong 1
    server: 104.17.194.220
    port: 80
    type: vless
    uuid: 3d2176d3-89b8-40aa-b004-0ff837bed25c
    tls: false
    network: ws
    ws-opts:
      path: /?ed=2048
      headers:
        Host: gentle-grass-cf96.hebe061103.workers.dev
  - name: Hong Kong 2
    server: 104.17.194.239
    port: 80
    type: vless
    uuid: 3962565d-e47d-4dd0-aa19-3286e04d9cb6
    tls: false
    network: ws
    ws-opts:
      path: /?ed=2048
      headers:
        Host: nameless-resonance-6e4c.hebe061103.workers.dev
  - name: Hong Kong 3
    server: 104.17.194.249
    port: 80
    type: vless
    uuid: 4239d44c-19c7-4b8b-ae07-16607c95b6fb
    tls: false
    network: ws
    ws-opts:
      path: /?ed=2048
      headers:
        Host: gentle-night-12e3.hebe061103.workers.dev
  - name: Hong Kong 4
    server: 104.17.194.1
    port: 80
    type: vless
    uuid: 2e632913-bae0-4855-893c-02c828c835a2
    tls: false
    network: ws
    ws-opts:
      path: /?ed=2048
      headers:
        Host: 56e5.hebe061103.workers.dev
proxy-groups:
  # æ ¸å¿ƒåŠ¨æ€ä»£ç†ç»„ï¼šæ‰€æœ‰ä»è¿œç¨‹è®¢é˜…è·å–çš„ VLESS+WS èŠ‚ç‚¹éƒ½æ±‡é›†äºæ­¤ã€‚
  # è¿™ä¸ªç»„ç”± update_nodes.py è„šæœ¬å…¨è‡ªåŠ¨æ›´æ–°ã€‚
  # å®ƒçš„ä½œç”¨æ˜¯ä½œä¸ºä¸€ä¸ªåº•å±‚çš„èŠ‚ç‚¹æ± ï¼Œä¾›å…¶ä»–æ›´é«˜å±‚çº§çš„ä»£ç†ç»„å¼•ç”¨å’Œä½¿ç”¨ã€‚
  - name: ğŸš€ èŠ‚ç‚¹æ± 
    type: url-test # æˆ–è€… load-balanceï¼Œå–å†³äºä½ å¸Œæœ›é»˜è®¤å¦‚ä½•åˆ†æµå’Œæµ‹è¯•
    url: http://www.google.com/generate_204
    interval: 300
    tolerance: 50 # url-test éœ€è¦ tolerance
    proxies:
      # è„šæœ¬ä¼šè‡ªåŠ¨æ›´æ–°è¿™é‡Œçš„åˆ—è¡¨ï¼Œæ›¿æ¢ä¸ºæœ€æ–°çš„ Hong Kong X èŠ‚ç‚¹
      - Hong Kong 0
      - Hong Kong 1
      - Hong Kong 2
      - Hong Kong 3
      - Hong Kong 4

  # æ™ºèƒ½ä»£ç†ç»„ï¼šæ ¹æ®èŠ‚ç‚¹å»¶è¿Ÿè‡ªåŠ¨é€‰æ‹©æœ€ä½³èŠ‚ç‚¹ã€‚
  # ç”¨æˆ·å¯ä»¥åœ¨UIä¸­é€‰æ‹©è¿™ä¸ªç»„ï¼Œå®ƒä¼šè‡ªåŠ¨åœ¨ "ğŸš€ èŠ‚ç‚¹æ± " ä¸­é€‰æ‹©æœ€å¿«çš„å¯ç”¨èŠ‚ç‚¹ã€‚
  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
      - ğŸš€ èŠ‚ç‚¹æ±  # å¼•ç”¨èŠ‚ç‚¹æ± ï¼Œæµ‹è¯•å…¶ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹

  # è‡ªåŠ¨æ•…éšœè½¬ç§»ç»„ï¼šæä¾›æ›´é«˜çš„å¯é æ€§ï¼Œå½“èŠ‚ç‚¹æ± ä¸­çš„èŠ‚ç‚¹ä¸å¯ç”¨æ—¶ï¼Œå°è¯•å¤‡ç”¨ã€‚
  # ç”¨æˆ·æˆ–è§„åˆ™å¯ä»¥å¼•ç”¨æ­¤ç»„ï¼Œä»¥è·å¾—æ›´ç¨³å®šçš„ä»£ç†ä½“éªŒã€‚
  - name: ğŸ” è‡ªåŠ¨æ•…éšœè½¬ç§»
    type: fallback
    url: http://www.google.com/generate_204
    interval: 300
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹© # ä¼˜å…ˆä½¿ç”¨è‡ªåŠ¨é€‰æ‹©çš„æœ€ä¼˜èŠ‚ç‚¹
      - ğŸš€ èŠ‚ç‚¹æ±  # å¦‚æœè‡ªåŠ¨é€‰æ‹©å¤±è´¥ï¼Œå°è¯•èŠ‚ç‚¹æ± ä¸­çš„å…¶ä»–èŠ‚ç‚¹
      - DIRECT # å¦‚æœæ‰€æœ‰ä»£ç†éƒ½æŒ‚äº†ï¼Œé€€å›ç›´è¿

  # ç”¨æˆ·ä¸»é€‰æ‹©ç»„ï¼šä¾›ç”¨æˆ·åœ¨ Clash å®¢æˆ·ç«¯ç•Œé¢æ‰‹åŠ¨é€‰æ‹©ã€‚
  # å®ƒæä¾›äº†å¤šç§çµæ´»çš„é€‰é¡¹ï¼šè‡ªåŠ¨æ•…éšœè½¬ç§»ã€è‡ªåŠ¨é€‰æ‹©ã€ä»¥åŠæ‰€æœ‰æœ€æ–°åŠ¨æ€èŠ‚ç‚¹ã€‚
  # è„šæœ¬ä¼šåŠ¨æ€æ›´æ–°è¿™é‡Œçš„ Hong Kong X èŠ‚ç‚¹ï¼Œå¹¶ä¿ç•™å›ºå®šçš„ç­–ç•¥å¼•ç”¨ã€‚
  - name: ğŸŒ å›½é™…æµé‡
    type: select
    proxies:
      - ğŸ” è‡ªåŠ¨æ•…éšœè½¬ç§» # æ¨èç”¨æˆ·é€‰æ‹©ï¼Œæä¾›äº†å¾ˆå¥½çš„ç¨³å®šæ€§
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹© # å¤‡é€‰çš„è‡ªåŠ¨é€‰æ‹©ç­–ç•¥
      - DIRECT # ç›´è¿é€‰é¡¹ï¼Œç”¨äºä¸èµ°ä»£ç†çš„æƒ…å†µ
      # ä»¥ä¸‹çš„ Hong Kong X èŠ‚ç‚¹ä¼šç”±è„šæœ¬è‡ªåŠ¨æ’å…¥å’Œæ›´æ–°
      - Hong Kong 0
      - Hong Kong 1
      - Hong Kong 2
      - Hong Kong 3
      - Hong Kong 4

  # åŠŸèƒ½æ€§ä»£ç†ç»„ï¼šé’ˆå¯¹ç‰¹å®šç±»å‹æµé‡ï¼ˆå¦‚æµåª’ä½“ã€ç¤¾äº¤åª’ä½“ç­‰ï¼‰è¿›è¡Œåˆ†æµã€‚
  # è¿™äº›ç»„éƒ½å¼•ç”¨ "ğŸŒ å›½é™…æµé‡"ï¼Œä½¿å¾—å®ƒä»¬éƒ½èƒ½äº«å—åˆ°åŠ¨æ€èŠ‚ç‚¹æ›´æ–°çš„å¥½å¤„ã€‚

  - name: ğŸŒ æµåª’ä½“
    type: select
    proxies:
      - ğŸŒ å›½é™…æµé‡ # å¼•ç”¨ä¸»é€‰æ‹©ç»„
      - DIRECT

  - name: ğŸ’¬ ç¤¾äº¤åª’ä½“ & æ¶ˆæ¯
    type: select
    proxies:
      - ğŸŒ å›½é™…æµé‡
      - DIRECT

  - name: ğŸ–¥ï¸ å¾®è½¯æœåŠ¡
    type: select
    proxies:
      - DIRECT # å¾®è½¯æœåŠ¡å¾ˆå¤šå»ºè®®ç›´è¿
      - ğŸŒ å›½é™…æµé‡

  - name: ğŸ è‹¹æœæœåŠ¡
    type: select
    proxies:
      - DIRECT # è‹¹æœæœåŠ¡å¾ˆå¤šå»ºè®®ç›´è¿
      - ğŸŒ å›½é™…æµé‡

  - name: ğŸ” è°·æ­ŒæœåŠ¡
    type: select
    proxies:
      - ğŸŒ å›½é™…æµé‡
      - DIRECT

  # ç›´è¿/æ‹¦æˆªç»„ï¼šè¿™äº›ç»„é€šå¸¸ç”¨äºè§„åˆ™çš„æœ€ç»ˆå†³ç­–ï¼Œä¸å¼•ç”¨å…¶ä»–ä»£ç†ç»„ã€‚
  - name: ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿
    type: select
    proxies:
      - DIRECT

  - name: ğŸš« å¹¿å‘Šæ‹¦æˆª
    type: select
    proxies:
      - REJECT

  # å…œåº•ç»„ï¼šç”¨äºå¤„ç†æ‰€æœ‰æœªè¢«å…¶ä»–è§„åˆ™åŒ¹é…çš„æµé‡ã€‚
  - name: ğŸš¦ å‰©ä½™æµé‡
    type: select
    proxies:
      - ğŸŒ å›½é™…æµé‡ # ä¼˜å…ˆèµ°ä»£ç†
      - ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿ # å…¶æ¬¡å°è¯•ä¸­å›½ç›´è¿

rule-providers:
  Anti-Ads:
    type: http
    behavior: domain
    format: yaml
    path: ./rule_provider/Anti-Ads.yaml
    url: https://anti-ad.net/clash.yaml
    interval: 43200 # 12å°æ—¶æ›´æ–°ä¸€æ¬¡
    lazy: false
rules:
  ## é IP ç±»è§„åˆ™ - æ›´ç²¾ç¡®çš„åŒ¹é…ä¼˜å…ˆ
  ### å¹¿å‘Šå’Œæ¶æ„åŸŸåæ‹¦æˆª (ä½¿ç”¨ Rule Provider) - æ”¾åœ¨éå¸¸é å‰çš„ä½ç½®ä»¥æé«˜æ‹¦æˆªæ•ˆç‡
  - RULE-SET,Anti-Ads,ğŸš« å¹¿å‘Šæ‹¦æˆª

  ### è‡ªå®šä¹‰ç›´è¿ï¼ˆå¸¸ç”¨å›½å†…æœåŠ¡ï¼Œç¡®ä¿ä¼˜å…ˆç›´è¿ï¼‰
  - DOMAIN-SUFFIX,taobao.com,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿
  - DOMAIN-SUFFIX,tmall.com,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿
  - DOMAIN-SUFFIX,alibaba.com,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿
  - DOMAIN-SUFFIX,alipay.com,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿
  - DOMAIN-SUFFIX,aliyun.com,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿
  - DOMAIN-KEYWORD,taobao,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿
  - DOMAIN-KEYWORD,tmall,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿
  - DOMAIN,v.ddys.pro,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿
  - DOMAIN,ddys.pro,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿
  - DOMAIN-KEYWORD,easytier,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿

  ### ç‰¹å®šä»£ç†éœ€æ±‚ï¼ˆç‰¹å®šåŸŸåå¼ºåˆ¶èµ°ä»£ç†ï¼‰
  - DOMAIN-SUFFIX,hf.co,ğŸŒ å›½é™…æµé‡
  - DOMAIN-SUFFIX,r2.cloudflarestorage.com,ğŸŒ å›½é™…æµé‡

  ### QUIC/UDP æµé‡å¤„ç† (è°¨æ…è°ƒæ•´ï¼Œå¦‚æœé‡åˆ° QUIC æœåŠ¡å¼‚å¸¸ï¼Œå¯èƒ½éœ€è¦ç§»é™¤æ­¤æ¡)
  # - AND,(AND,(DST-PORT,443),(NETWORK,UDP)),(NOT,((GEOSITE,cn))),REJECT 

  ### GEOSITE è§„åˆ™ - æŒ‰æœåŠ¡ç±»å‹å’Œæµé‡é‡è¦æ€§æ’åº
  - GEOSITE,category-games@cn,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿ # å›½å†…æ¸¸æˆç›´è¿ï¼Œç¡®ä¿ä½å»¶è¿Ÿ
  - GEOSITE,cn,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿ # æ‰€æœ‰ä¸­å›½å¤§é™†åŸŸåç›´è¿
  - GEOSITE,apple-cn,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿ # è‹¹æœä¸­å›½æœåŠ¡ç›´è¿
  - GEOSITE,microsoft,ğŸ–¥ï¸ å¾®è½¯æœåŠ¡ # å¾®è½¯æœåŠ¡ (å¦‚Office365, Azure)ï¼Œä¼˜å…ˆè€ƒè™‘ç›´è¿æˆ–ç‰¹å®šä»£ç†
  - GEOSITE,apple,ğŸ è‹¹æœæœåŠ¡ # è‹¹æœå›½é™…æœåŠ¡
  - GEOSITE,google,ğŸ” è°·æ­ŒæœåŠ¡ # Google æœåŠ¡ç»Ÿä¸€èµ°è°·æ­ŒæœåŠ¡ç»„
  - GEOSITE,telegram,ğŸ’¬ ç¤¾äº¤åª’ä½“ & æ¶ˆæ¯ # Telegram
  - GEOSITE,category-entertainment,ğŸŒ æµåª’ä½“ # æµåª’ä½“å’Œå¨±ä¹
  - GEOSITE,category-social-media-!cn,ğŸ’¬ ç¤¾äº¤åª’ä½“ & æ¶ˆæ¯ # å›½å¤–ç¤¾äº¤åª’ä½“
  - GEOSITE,category-android-app-download,ğŸŒ å›½é™…æµé‡ # å®‰å“åº”ç”¨ä¸‹è½½
  - GEOSITE,category-porn,ğŸŒ å›½é™…æµé‡ # æ•æ„Ÿå†…å®¹
  - GEOSITE,onedrive,ğŸŒ å›½é™…æµé‡ # OneDrive
  - GEOSITE,category-ai-chat-!cn,ğŸŒ å›½é™…æµé‡ # AIèŠå¤©
  - GEOSITE,category-cryptocurrency,ğŸŒ å›½é™…æµé‡ # åŠ å¯†è´§å¸
  - GEOSITE,geolocation-!cn,ğŸŒ å›½é™…æµé‡ # æ‰€æœ‰éä¸­å›½åœ°ç†ä½ç½®çš„åŸŸåï¼ˆå…œåº•ä»£ç†ï¼‰

  ## IP ç±»è§„åˆ™ - ç²¾ç¡®åŒ¹é…ä¼˜å…ˆ
  ### ç»•è¿‡å±€åŸŸç½‘å’Œç‰¹æ®Šä¿ç•™åœ°å€ (ä¼˜å…ˆç›´è¿)
  - IP-CIDR,10.0.0.0/8,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿
  - IP-CIDR,172.16.0.0/12,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿
  - IP-CIDR,192.168.0.0/16,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿
  - IP-CIDR,100.64.0.0/10,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿
  - IP-CIDR,127.0.0.0/8,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿
  - IP-CIDR,::1/128,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿       # IPv6 localhost
  - IP-CIDR,fc00::/7,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿      # IPv6 Unique Local Address
  - IP-CIDR,fe80::/10,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿     # IPv6 Link-Local Address

  ### GEOIP è§„åˆ™ - é’ˆå¯¹çº¯ IP æµé‡
  - GEOIP,CN,ğŸ‡¨ğŸ‡³ ä¸­å›½ç›´è¿,no-resolve # ä¸­å›½å¤§é™† IP ç›´è¿
  - GEOIP,google,ğŸ” è°·æ­ŒæœåŠ¡,no-resolve # Google IP
  - GEOIP,telegram,ğŸ’¬ ç¤¾äº¤åª’ä½“ & æ¶ˆæ¯,no-resolve # Telegram IP
  - GEOIP,facebook,ğŸŒ æµåª’ä½“,no-resolve # Facebook IP
  - GEOIP,twitter,ğŸ’¬ ç¤¾äº¤åª’ä½“ & æ¶ˆæ¯,no-resolve # Twitter IP
  - GEOIP,netflix,ğŸŒ æµåª’ä½“,no-resolve # Netflix IP
  # å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ å…¶ä»–å¸¸ç”¨æœåŠ¡çš„ GEOIP è§„åˆ™

  ## å…œåº•è§„åˆ™ - æœ€ååŒ¹é…
  - MATCH,ğŸš¦ å‰©ä½™æµé‡ # ä»»ä½•æœªåŒ¹é…çš„æµé‡éƒ½äº¤ç»™ "ğŸš¦ å‰©ä½™æµé‡" å¤„ç†
