# ======================== æ ¸å¿ƒé…ç½® ========================
port: 7890             # HTTP ä»£ç†ç«¯å£
socks-port: 7891       # SOCKS5 ä»£ç†ç«¯å£
allow-lan: true        # å…è®¸å±€åŸŸç½‘è®¾å¤‡è¿æ¥ï¼ˆå¦‚æ‰‹æœºè¿æ¥ç”µè„‘çš„çƒ­ç‚¹ï¼‰
mode: rule             # ä»£ç†æ¨¡å¼ï¼šæ ¹æ®è§„åˆ™è¿›è¡Œåˆ†æµ
log-level: info        # æ—¥å¿—çº§åˆ«ï¼šinfo é€‚åˆæ—¥å¸¸ä½¿ç”¨ï¼ŒæŸ¥çœ‹è¿è¡ŒçŠ¶æ€

# ======================== Profile ç›¸å…³ ========================
profile:
  store-selected: true # å­˜å‚¨ç”¨æˆ·é€‰æ‹©çš„ä»£ç†èŠ‚ç‚¹
  store-fake-ip: true  # å­˜å‚¨ Fake IP æ˜ å°„ï¼Œæå‡ DNS é€Ÿåº¦å’Œç¨³å®šæ€§

# ======================== TUN æ¨¡å¼ (è™šæ‹Ÿç½‘å¡) ========================
tun:
  enable: true         # å¼€å¯ TUN æ¨¡å¼ï¼Œæ¥ç®¡è®¾å¤‡æ‰€æœ‰æµé‡
  stack: system        # ä½¿ç”¨ç³»ç»Ÿç½‘ç»œæ ˆï¼Œå…¼å®¹æ€§å¥½
  device: mihomo       # TUN è®¾å¤‡åç§°ï¼ŒClash Meta é»˜è®¤åç§°
  dns-hijack:
    - any:53            # åŠ«æŒæ‰€æœ‰ UDP 53 ç«¯å£çš„ DNS è¯·æ±‚
    - tcp://any:53      # åŠ«æŒæ‰€æœ‰ TCP 53 ç«¯å£çš„ DNS è¯·æ±‚
  auto-route: true     # è‡ªåŠ¨é…ç½®è·¯ç”±è¡¨
  auto-detect-interface: true # è‡ªåŠ¨æ£€æµ‹ç½‘ç»œæ¥å£

# ======================== DNS é…ç½® ========================
dns:
  enable: true         # å¼€å¯ DNS æœåŠ¡
  listen: 0.0.0.0:1053   # DNS ç›‘å¬åœ°å€å’Œç«¯å£ï¼Œ0.0.0.0 å…è®¸æ‰€æœ‰æ¥å£è®¿é—®
  ipv6: false          # å…³é—­ IPv6 DNS è§£æ
  prefer-h3: true      # ä¼˜å…ˆä½¿ç”¨ HTTP/3 DNS æŸ¥è¯¢ï¼Œæå‡é€Ÿåº¦
  respect-rules: true  # å°Šé‡è§„åˆ™ï¼Œæ ¹æ®è§„åˆ™å†³å®š DNS æŸ¥è¯¢æ–¹å¼
  enhanced-mode: fake-ip # å¼€å¯ Fake IP æ¨¡å¼ï¼Œæå‡æ€§èƒ½å’Œè§£å†³ DNS æ±¡æŸ“
  use-hosts: true      # ä½¿ç”¨æœ¬åœ° hosts æ–‡ä»¶

  # é»˜è®¤ä¸Šæ¸¸ DNS æœåŠ¡å™¨ï¼šç”¨äºç›´è¿æˆ–æ— æ³•åˆ¤æ–­è§„åˆ™çš„åŸŸåï¼Œå»ºè®®å¡«å›½å†…å¸¸ç”¨ DNS
  default-nameserver:
    - 223.5.5.5         # é˜¿é‡Œå…¬å…± DNS
    - 119.29.29.29      # è…¾è®¯å…¬å…± DNS

  # å¸¸è§„ DNS æœåŠ¡å™¨ï¼šé€šå¸¸ç”¨äºä»£ç†æµé‡ï¼Œæˆ–å…œåº•è§£æï¼Œå»ºè®®å¡«å¢ƒå¤–åŠ å¯† DNS
  nameserver:
    - https://dns.google/dns-query # Google DoH
    - https://1.1.1.1/dns-query    # Cloudflare DoH
    - quic://dns.adguard-dns.com:784 # AdGuard DoQ (Clash Meta æ¨è)

  # ä»£ç†æœåŠ¡å™¨ä¸“ç”¨çš„ DNS æœåŠ¡å™¨ï¼šç¡®ä¿é€šè¿‡ä»£ç†è§£æçš„åŸŸåèµ°ä»£ç† DNS
  proxy-server-nameserver:
    - https://dns.google/dns-query
    - https://1.1.1.1/dns-query
    - quic://dns.adguard-dns.com:784

  # æ ¹æ®åŸŸåç­–ç•¥é€‰æ‹© DNS æœåŠ¡å™¨ï¼ˆç²¾ç®€ä¸ºæ ¸å¿ƒåœºæ™¯ï¼‰
  nameserver-policy:
    "geosite:cn":         # ä¸­å›½å¤§é™†åŸŸåèµ°å›½å†… DNS
      - 223.5.5.5
      - 119.29.29.29
    "geosite:apple-cn":   # è‹¹æœä¸­å›½åŸŸåèµ°å›½å†… DNS
      - 223.5.5.5
      - 119.29.29.29
    "geosite:telegram":   # Telegram åŸŸåå¼ºåˆ¶èµ°ä»£ç† DNSï¼ˆå³ä½¿ç»Ÿä¸€ä»£ç†ç»„ï¼ŒDNS è§£æä»å¯å•ç‹¬æ§åˆ¶ï¼‰
      - https://dns.google/dns-query
      - https://1.1.1.1/dns-query
      - quic://dns.adguard-dns.com:784

  fake-ip-range: 198.18.0.1/16 # Fake IP åœ°å€æ®µ
  fake-ip-filter:      # Fake IP è¿‡æ»¤ï¼Œä¸ä¸ºè¿™äº›åŸŸååˆ†é… Fake IP
    - '*.local'
    - '*.lan'
    - 'geosite:cn'       # ä¸­å›½å¤§é™†åŸŸå
    - 'geosite:private'  # ç§æœ‰ç½‘ç»œåœ°å€
    - 'geosite:apple-cn' # è‹¹æœä¸­å›½åŸŸå
    - 'geosite:telegram' # **é¿å… Telegram ä½¿ç”¨ Fake IP**
    - 'api.telegram.org' # **è¡¥å……ï¼šTelegram ç‰¹æ®ŠåŸŸå**

# ======================== GeoData é…ç½® ========================
geodata-mode: true
geox-url:
  geoip: "https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geoip.dat"
  geosite: "https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geosite.dat"

# ======================== ä»£ç†èŠ‚ç‚¹ (Proxies) ========================
proxies:
  - name: å¤©ä¹¦cf
    type: vless
    server: laji.jisucf.cloudns.biz
    port: 443
    uuid: ab23f618-3f94-4d74-8c8b-d5703403b5be
    network: ws
    tls: true
    udp: true
    servername: git02.jisucf.cloudns.biz
    ws-opts:
      path: "/?ed=2560"
      headers:
        Host: git02.jisucf.cloudns.biz

  - name: å¤©ä¹¦git
    type: vless
    server: laji.jisucf.cloudns.biz
    port: 443
    uuid: aa6afb24-210c-4fdc-979e-58f71a6f779f
    udp: true
    tls: true
    sni: git01.jisucf.cloudns.biz
    network: ws
    ws-opts:
      path: "/?ed=2560"
      headers:
        Host: git01.jisucf.cloudns.biz

# ======================== ä»£ç†ç»„ (Proxy Groups) ========================
proxy-groups:
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - DIRECT
      - å¤©ä¹¦cf
      - å¤©ä¹¦git

  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300 # æµ‹è¯•é—´éš”å»¶é•¿ï¼Œå‡å°‘èµ„æºæ¶ˆè€—
    tolerance: 100 # å®¹å¿åº¦é™ä½ï¼Œæ›´ä¸¥æ ¼ç­›é€‰èŠ‚ç‚¹
    proxies:
      - å¤©ä¹¦cf
      - å¤©ä¹¦git

  - name: ğŸ¯ å…¨çƒç›´è¿
    type: select
    proxies:
      - DIRECT

  - name: ğŸ›‘ å…¨çƒæ‹¦æˆª
    type: select
    proxies:
      - REJECT

  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ¯ å…¨çƒç›´è¿

# ======================== è§„åˆ™ (Rules) ========================
rules:
  ## å±€åŸŸç½‘ç›´è¿
  - IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
  - IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
  - IP-CIDR,100.64.0.0/10,DIRECT,no-resolve
  - IP-CIDR,127.0.0.0/8,DIRECT,no-resolve

  ## ä¸­å›½å¤§é™†æµé‡ç›´è¿
  - GEOIP,CN,DIRECT,no-resolve
  - GEOSITE,cn,DIRECT
  - GEOSITE,apple-cn,DIRECT
  - GEOSITE,microsoft@cn,DIRECT

  ## å¹¿å‘Šå’Œæ¶æ„æµé‡æ‹¦æˆªï¼ˆç¤ºä¾‹ï¼Œå¦‚æœä½ æœ‰å¤–éƒ¨è§„åˆ™é›†ï¼Œå¯ä»¥é‡æ–°æ·»åŠ  RULE-SETï¼‰
  - DOMAIN-KEYWORD,ad,ğŸ›‘ å…¨çƒæ‹¦æˆª
  - DOMAIN-SUFFIX,ads.com,ğŸ›‘ å…¨çƒæ‹¦æˆª

  ## Telegram æµé‡ï¼ˆç›´æ¥æŒ‡å‘èŠ‚ç‚¹é€‰æ‹©ï¼‰
  - GEOSITE,telegram,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  # å…³é”®ï¼šæ·»åŠ  Telegram IP æ®µï¼Œç¡®ä¿æµé‡èµ°ä»£ç†
  # âš ï¸ è¿™äº› IP æ®µå¯èƒ½å˜åŒ–ï¼Œè¯·è‡ªè¡ŒæŸ¥è¯¢æœ€æ–°å¹¶æ›´æ–°
  - IP-CIDR,91.108.4.0/22,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - IP-CIDR,91.108.8.0/22,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - IP-CIDR,149.154.160.0/22,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - IP-CIDR,185.76.0.0/22,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve

  ## å›½å¤–å¸¸ç”¨æœåŠ¡ï¼ˆé€šè¿‡ä»£ç†èŠ‚ç‚¹é€‰æ‹©ï¼‰
  - GEOSITE,google,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,youtube,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,twitter,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,facebook,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,netflix,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,disney,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,tiktok,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,instagram,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  ## å›½å¤–å…œåº•ï¼šæ‰€æœ‰æœªåŒ¹é…åˆ°çš„å›½å¤–æµé‡éƒ½èµ°ä»£ç†
  - GEOSITE,geolocation-!cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  ## æœ€ç»ˆå…œåº•ï¼šæ‰€æœ‰æœªèƒ½åŒ¹é…çš„æµé‡éƒ½èµ°â€œæ¼ç½‘ä¹‹é±¼â€ç»„
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
