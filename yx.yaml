port: 7890             # HTTP ä»£ç†ç«¯å£ï¼Œæ¨èä½¿ç”¨é€šç”¨ç«¯å£
socks-port: 7891       # SOCKS5 ä»£ç†ç«¯å£ï¼Œæ¨èä½¿ç”¨é€šç”¨ç«¯å£
allow-lan: true        # å…è®¸å±€åŸŸç½‘è®¾å¤‡è¿æ¥ï¼Œé€šå¸¸ç”¨äºè·¯ç”±å™¨æˆ–å…±äº«ä»£ç†
mode: rule             # ä»£ç†æ¨¡å¼ï¼Œæ¨èä½¿ç”¨è§„åˆ™æ¨¡å¼
log-level: info        # æ—¥å¿—çº§åˆ«ï¼Œinfo é€‚åˆæ—¥å¸¸ä½¿ç”¨ï¼Œdebug ç”¨äºæ’æŸ¥é—®é¢˜
unified-delay: true    # å¼€å¯ç»Ÿä¸€å»¶è¿Ÿæµ‹è¯•ï¼Œæœ‰åŠ©äºæ›´å‡†ç¡®åœ°è¯„ä¼°èŠ‚ç‚¹æ€§èƒ½
tcp-concurrent: true   # TCP å¹¶å‘è¿æ¥ï¼Œæå‡éƒ¨åˆ†åœºæ™¯ä¸‹çš„è¿æ¥é€Ÿåº¦
global-client-fingerprint: chrome # å…¨å±€ TLS æŒ‡çº¹ï¼Œæ¨¡æ‹Ÿ Chrome æµè§ˆå™¨ï¼Œé™ä½è¢«è¯†åˆ«é£é™©

# Profile ç›¸å…³
profile:
  store-selected: true # å­˜å‚¨ç”¨æˆ·é€‰æ‹©çš„ä»£ç†èŠ‚ç‚¹
  store-fake-ip: true  # å­˜å‚¨ Fake IP æ˜ å°„ï¼Œæå‡ DNS è§£æé€Ÿåº¦å’Œç¨³å®šæ€§

# æµé‡å—…æ¢
sniffer:
  enable: true         # å¼€å¯æµé‡å—…æ¢
  sniff:
    HTTP:
      ports: [80, 8080-8880] # å—…æ¢ HTTP æµé‡çš„ç«¯å£èŒƒå›´
      override-destination: true # è¦†ç›–ç›®æ ‡åœ°å€ï¼Œç”¨äºæŸäº›ç‰¹æ®Šåº”ç”¨
    TLS:
      ports: [443, 8443] # å—…æ¢ TLS æµé‡çš„ç«¯å£èŒƒå›´
    QUIC:
      ports: [443, 8443] # å—…æ¢ QUIC æµé‡çš„ç«¯å£èŒƒå›´
  # é¿å…å—…æ¢ç‰¹å®šåŸŸåçš„æµé‡ï¼Œæé«˜æ€§èƒ½å¹¶é¿å…è¯¯åˆ¤
  skip-domain:
    - "Mijia Cloud"
    - dlg.io.mi.com
    - "+.push.apple.com"
    - "*.local"          # å¸¸è§çš„å±€åŸŸç½‘åŸŸå
    - "*.lan"            # å¸¸è§çš„å±€åŸŸç½‘åŸŸå
    - "connectivity-check.ubuntu.com" # Linux ç³»ç»Ÿè¿æ¥æ€§æ£€æŸ¥
    - "www.msftconnecttest.com" # Windows ç³»ç»Ÿè¿æ¥æ€§æ£€æŸ¥
    - "www.qualcomm.cn" # å®‰å“ç³»ç»Ÿè¿æ¥æ€§æ£€æŸ¥
    - "captive.apple.com" # è‹¹æœç³»ç»Ÿè¿æ¥æ€§æ£€æŸ¥

# TUN æ¨¡å¼ï¼ˆè™šæ‹Ÿç½‘å¡ï¼‰
tun:
  enable: true         # å¼€å¯ TUN æ¨¡å¼ï¼Œæ¥ç®¡æ‰€æœ‰æµé‡
  stack: system        # ä½¿ç”¨ç³»ç»Ÿç½‘ç»œæ ˆï¼Œå…¼å®¹æ€§è¾ƒå¥½
  device: mihomo       # TUN è®¾å¤‡åç§°ï¼Œå¯è‡ªå®šä¹‰ï¼Œmihomo æ˜¯ Clash Meta çš„é»˜è®¤åç§°
  dns-hijack:
    - any:53            # åŠ«æŒæ‰€æœ‰ UDP 53 ç«¯å£çš„ DNS è¯·æ±‚
    - tcp://any:53      # åŠ«æŒæ‰€æœ‰ TCP 53 ç«¯å£çš„ DNS è¯·æ±‚
  auto-route: true     # è‡ªåŠ¨é…ç½®è·¯ç”±è¡¨
  auto-detect-interface: true # è‡ªåŠ¨æ£€æµ‹ç½‘ç»œæ¥å£
  strict-route: true   # ä¸¥æ ¼è·¯ç”±æ¨¡å¼ï¼Œç¡®ä¿æµé‡é€šè¿‡ TUN
  endpoint-independent-nat: true # å¼€å¯ç«¯ç‚¹æ— å…³ NATï¼Œæœ‰åŠ©äº P2P åº”ç”¨å’Œæ¸¸æˆ

# DNS é…ç½®
dns:
  enable: true         # å¼€å¯ DNS æœåŠ¡
  listen: 0.0.0.0:1053   # DNS ç›‘å¬åœ°å€å’Œç«¯å£ï¼Œ0.0.0.0 å…è®¸æ‰€æœ‰æ¥å£è®¿é—®
  ipv6: false          # å…³é—­ IPv6 DNS è§£æï¼Œé¿å…æŸäº›ç¯å¢ƒä¸‹çš„é—®é¢˜
  prefer-h3: true      # ä¼˜å…ˆä½¿ç”¨ HTTP/3 DNS æŸ¥è¯¢ï¼Œæé«˜é€Ÿåº¦
  respect-rules: true  # å°Šé‡è§„åˆ™ï¼Œæ ¹æ®è§„åˆ™å†³å®š DNS æŸ¥è¯¢æ–¹å¼
  enhanced-mode: fake-ip # å¼€å¯ Fake IP æ¨¡å¼ï¼Œæå‡æ€§èƒ½å¹¶è§£å†³ DNS æ±¡æŸ“
  use-hosts: true      # ä½¿ç”¨æœ¬åœ° hosts æ–‡ä»¶
  # é»˜è®¤ä¸Šæ¸¸ DNS æœåŠ¡å™¨ï¼Œç”¨äºç›´è¿æˆ–æ— æ³•åˆ¤æ–­è§„åˆ™çš„åŸŸå
  default-nameserver:
    - 223.5.5.5         # é˜¿é‡Œå…¬å…± DNS
    - 180.168.255.18    # è”é€šå…¬å…± DNS (ç¤ºä¾‹ï¼Œå¯æ ¹æ®å®é™…ç½‘ç»œç¯å¢ƒé€‰æ‹©)
    - 117.50.11.11      # è…¾è®¯å…¬å…± DNS (ç¤ºä¾‹ï¼Œå¯æ ¹æ®å®é™…ç½‘ç»œç¯å¢ƒé€‰æ‹©)
    - 119.29.29.29      # è…¾è®¯å…¬å…± DNS
  # å¸¸è§„ DNS æœåŠ¡å™¨ï¼Œé€šå¸¸ç”¨äºä»£ç†æµé‡ï¼Œæˆ–å…œåº•è§£æ
  nameserver:
    - https://dns.google/dns-query # Google DoH
    - https://1.1.1.1/dns-query    # Cloudflare DoH
    - quic://dns.adguard-dns.com:784  # AdGuard DoQ (æ¨èï¼Œéœ€è¦ Clash Meta æ”¯æŒ)
    - tls://dns.google             # Google DoT
  # ä»£ç†æœåŠ¡å™¨ä¸“ç”¨çš„ DNS æœåŠ¡å™¨ï¼Œç¡®ä¿é€šè¿‡ä»£ç†è§£æçš„åŸŸåèµ°ä»£ç† DNS
  proxy-server-nameserver:
    - https://dns.google/dns-query
    - https://1.1.1.1/dns-query
    - https://doh.pub/dns-query    # è…¾è®¯ DoH
    - quic://dns.adguard-dns.com:784
  # æ ¹æ®åŸŸåç­–ç•¥é€‰æ‹© DNS æœåŠ¡å™¨
  nameserver-policy:
    "geosite:cn,apple-cn,category-games@cn,private": # ä¸­å›½å¤§é™†ã€è‹¹æœä¸­å›½ã€ä¸­å›½æ¸¸æˆã€ç§äººåŸŸå
      - 117.50.11.11
      - 180.168.255.18
      - 223.5.5.5
      - 119.29.29.29
    "geosite:netflix,disney": # æµåª’ä½“åŸŸåï¼Œå¼ºåˆ¶èµ°ä»£ç† DNS
      - https://dns.google/dns-query
      - https://1.1.1.1/dns-query
    # æ›´å¤šç­–ç•¥å¯ä»¥æ ¹æ®éœ€æ±‚æ·»åŠ ï¼Œä¾‹å¦‚ï¼š
    # "geosite:geolocation-!cn": # éä¸­å›½å¤§é™†åŸŸå
    #   - https://dns.google/dns-query
    #   - https://1.1.1.1/dns-query
    # "domain-suffix:example.com": # ç‰¹å®šåŸŸååç¼€
    #   - 1.1.1.1
  fake-ip-range: 198.18.0.1/16 # å»ºè®®ä½¿ç”¨ 198.18.0.0/16ï¼Œè¿™æ˜¯ IANA ä¸ºæµ‹è¯•å’ŒåŸºå‡†è®¾è®¡çš„ç§æœ‰åœ°å€èŒƒå›´ï¼Œé¿å…å†²çª
  # Fake IP è¿‡æ»¤ï¼Œä¸ä¸ºè¿™äº›åŸŸååˆ†é… Fake IP
  fake-ip-filter:
    - '*'                # é»˜è®¤æ‰€æœ‰åŸŸåéƒ½å°è¯• Fake IP
    - '+.lan'            # å±€åŸŸç½‘åœ°å€
    - '+.local'          # æœ¬åœ°è®¾å¤‡
    - '+.stun.*.*.*'     # STUN æœåŠ¡å™¨ï¼Œç”¨äº NAT ç©¿é€ï¼Œä¸éœ€è¦ Fake IP
    - '+.stun.*.*.*.*'   # åŒä¸Š
    - '+.tiktokcdn.com'  # TikTok CDNï¼Œå¯èƒ½å¯¼è‡´å…¼å®¹æ€§é—®é¢˜
    - '+.tiktokv.com'    # TikTok è§†é¢‘åŸŸå
    - 'geosite:cn'       # ä¸­å›½å¤§é™†åŸŸåé€šå¸¸ä¸éœ€è¦ Fake IP
    - 'geosite:private'  # ç§æœ‰ç½‘ç»œåœ°å€ï¼Œä¸éœ€è¦ Fake IP
    - 'geosite:category-games@cn' # ä¸­å›½å¤§é™†æ¸¸æˆåŸŸå
    - 'geosite:apple-cn' # è‹¹æœä¸­å›½åŸŸå
    - 'geosite:microsoft@cn' # å¾®è½¯ä¸­å›½åŸŸå

geodata-mode: true
geox-url:
  geoip: "https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geoip.dat"
  geosite: "https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geosite.dat"

proxies:
  - name: å¤©ä¹¦cf
    type: vless
    server: laji.jisucf.cloudns.biz
    port: 443
    uuid: ab23f618-3f94-4d74-8c8b-d5703403b5be
    network: ws
    tls: true
    udp: true
    servername: git02.jisucf.cloudns.biz
    ws-opts:
      path: "/?ed=2560"
      headers:
        Host: git02.jisucf.cloudns.biz

  - name: å¤©ä¹¦git
    type: vless
    server: laji.jisucf.cloudns.biz
    port: 443
    uuid: aa6afb24-210c-4fdc-979e-58f71a6f779f
    udp: true
    tls: true
    sni: git01.jisucf.cloudns.biz
    network: ws
    ws-opts:
      path: "/?ed=2560"
      headers:
        Host: git01.jisucf.cloudns.biz

proxy-groups:
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - DIRECT
      - å¤©ä¹¦cf
      - å¤©ä¹¦git

  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 180
    tolerance: 150
    proxies:
      - å¤©ä¹¦cf
      - å¤©ä¹¦git

  - name: ğŸŒ å›½å¤–åª’ä½“
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ¯ å…¨çƒç›´è¿
      - å¤©ä¹¦cf
      - å¤©ä¹¦git

  - name: ğŸ“² ç”µæŠ¥ä¿¡æ¯
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ¯ å…¨çƒç›´è¿
      - å¤©ä¹¦cf
      - å¤©ä¹¦git

  - name: â“‚ï¸ å¾®è½¯æœåŠ¡
    type: select
    proxies:
      - ğŸ¯ å…¨çƒç›´è¿
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - å¤©ä¹¦cf
      - å¤©ä¹¦git

  - name: ğŸ è‹¹æœæœåŠ¡
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ¯ å…¨çƒç›´è¿
      - å¤©ä¹¦cf
      - å¤©ä¹¦git

  - name: ğŸ“¢ è°·æ­ŒFCM
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ¯ å…¨çƒç›´è¿
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - å¤©ä¹¦cf
      - å¤©ä¹¦git

  - name: ğŸ¯ å…¨çƒç›´è¿
    type: select
    proxies:
      - DIRECT

  - name: ğŸ›‘ å…¨çƒæ‹¦æˆª
    type: select
    proxies:
      - REJECT
      - DIRECT

  - name: ğŸƒ åº”ç”¨å‡€åŒ–
    type: select
    proxies:
      - REJECT
      - DIRECT

  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ¯ å…¨çƒç›´è¿
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - å¤©ä¹¦cf
      - å¤©ä¹¦git

rule-providers:
  Anti-Ads:
    type: http
    behavior: domain
    format: yaml
    path: ./rule_provider/Anti-Ads.yaml
    url: "https://anti-ad.net/clash.yaml"
    interval: 43200
    lazy: false

rules:
  ## ğŸš« æ·˜å®/å¤©çŒ«/æ”¯ä»˜å®é˜²æ‹’ç»è®¿é—®
  - DOMAIN-SUFFIX,taobao.com,DIRECT
  - DOMAIN-SUFFIX,tmall.com,DIRECT
  - DOMAIN-SUFFIX,alibaba.com,DIRECT
  - DOMAIN-SUFFIX,alipay.com,DIRECT
  - DOMAIN-KEYWORD,taobao,DIRECT
  - DOMAIN-KEYWORD,tmall,DIRECT
  - DOMAIN-KEYWORD,alipay,DIRECT
  - DOMAIN-KEYWORD,alicdn,DIRECT
  - IP-CIDR,140.205.0.0/16,DIRECT,no-resolve
  - IP-CIDR,42.120.0.0/16,DIRECT,no-resolve
  - IP-CIDR,203.119.0.0/16,DIRECT,no-resolve
  - IP-CIDR,58.83.0.0/16,DIRECT,no-resolve

  ## TikTok ä¸“ç”¨
  - DOMAIN-SUFFIX,tiktokcdn.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,tiktokv.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,byteoversea.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,bytecdn.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-KEYWORD,tiktok,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  ## Telegram è¡¥å……
  - DOMAIN-SUFFIX,telegram.org,ğŸ“² ç”µæŠ¥ä¿¡æ¯
  - DOMAIN-SUFFIX,tdesktop.com,ğŸ“² ç”µæŠ¥ä¿¡æ¯
  - DOMAIN-SUFFIX,t.me,ğŸ“² ç”µæŠ¥ä¿¡æ¯
  - DOMAIN,api.telegram.org,ğŸ“² ç”µæŠ¥ä¿¡æ¯

  ## å…¶å®ƒè‡ªå®šä¹‰
  - DOMAIN,v.ddys.pro,DIRECT
  - DOMAIN,ddys.pro,DIRECT
  - DOMAIN-SUFFIX,hf.co,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-KEYWORD,easytier,DIRECT
  - DOMAIN-SUFFIX,r2.cloudflarestorage.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - AND,(AND,(DST-PORT,443),(NETWORK,UDP)),(NOT,((GEOSITE,cn))),REJECT

  ## å¹¿å‘Š
  - RULE-SET,Anti-Ads,REJECT

  ## å¤§æµé‡
  - GEOSITE,category-android-app-download,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,category-entertainment,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,category-porn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,telegram,ğŸ“² ç”µæŠ¥ä¿¡æ¯
  - GEOSITE,onedrive,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,category-games@cn,DIRECT

  ## å›½å¤–æœåŠ¡
  - GEOSITE,twitter,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,facebook,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,netflix,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  ## å›½å¤–å›ºå®šIP
  - GEOSITE,category-ai-chat-!cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,category-cryptocurrency,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,category-social-media-!cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  ## Google
  - GEOSITE,google,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  ## å›½å†…ç›´è¿
  - GEOIP,CN,DIRECT,no-resolve
  - GEOSITE,cn,DIRECT
  - GEOSITE,apple-cn,DIRECT

  ## å›½å¤–å…œåº•
  - GEOSITE,geolocation-!cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  ## å±€åŸŸç½‘
  - IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
  - IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
  - IP-CIDR,100.64.0.0/10,DIRECT,no-resolve
  - IP-CIDR,127.0.0.0/8,DIRECT,no-resolve

  ## å…œåº•
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
